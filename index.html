<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ScoreHub Pro</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&family=Roboto+Mono:wght@700&display=swap" rel="stylesheet">

<style>
:root { --accent:#00ff85; --bg:#0b0e11; --card:#161b22; --border:#30363d; }
body { background:var(--bg); color:#fff; font-family:'Inter',sans-serif; letter-spacing:-0.02em; }
header { background:rgba(11,14,17,.95); backdrop-blur:12px; border-bottom:1px solid var(--border); position:fixed; top:0; width:100%; max-width:448px; z-index:100; }
.date-nav { display:flex; align-items:center; justify-content:space-between; padding:12px 16px; background:var(--card); border-radius:12px; margin:16px; }
.date-nav button { background:none; border:none; color:#8b949e; font-size:20px; cursor:pointer; }
.date-nav button:hover { color:var(--accent); }
.date-display { font-weight:800; font-size:15px; cursor:pointer; }
.filter-pills { display:flex; gap:12px; padding:12px 16px; overflow-x:auto; }
.filter-pill { background:var(--card); border:1px solid var(--border); padding:8px 16px; border-radius:20px; font-size:12px; font-weight:700; cursor:pointer; }
.filter-pill.active { background:var(--accent); color:#000; }
.league-header { padding:12px 16px; font-size:13px; font-weight:900; color:#8b949e; display:flex; gap:8px; cursor:pointer; }
.match-card { background:var(--card); border:1px solid var(--border); border-radius:12px; padding:16px; margin:0 16px 8px; display:flex; justify-content:space-between; }
.team-row { display:flex; align-items:center; gap:12px; padding:6px 0; }
.team-logo { width:28px; height:28px; object-fit:contain; }
.team-name { font-size:14px; font-weight:700; flex:1; }
.score { font-family:'Roboto Mono'; font-weight:900; width:24px; text-align:center; }
.match-time { font-size:13px; font-weight:700; color:#8b949e; width:70px; text-align:center; }
.collapsed .matches-container { display:none; }
.nav-bottom { position:fixed; bottom:0; width:100%; max-width:448px; background:#161b22; border-top:1px solid var(--border); display:flex; justify-content:space-around; padding:12px 0; }
.nav-btn { font-size:10px; font-weight:800; color:#8b949e; cursor:pointer; text-transform:uppercase; display:flex; flex-direction:column; align-items:center; gap:4px; }
.nav-btn.active { color:var(--accent); }
</style>
</head>

<body class="max-w-md mx-auto pb-32">

<header class="p-4 font-black italic uppercase">
Score<span class="text-[#00ff85]">Hub</span>
</header>

<main class="mt-20">

<!-- MATCHES TAB -->
<div id="tab-matches">
<div class="date-nav">
<button onclick="changeDate(-1)">‚Äπ</button>
<div id="currentDate" class="date-display" onclick="resetToToday()">Loading‚Ä¶</div>
<button onclick="changeDate(1)">‚Ä∫</button>
</div>

<div class="filter-pills">
<div class="filter-pill active" onclick="filterLeague('all')">All</div>
<div class="filter-pill" onclick="filterLeague('PREM')">Premier League</div>
<div class="filter-pill" onclick="filterLeague('LALIGA')">La Liga</div>
<div class="filter-pill" onclick="filterLeague('MLS')">MLS</div>
</div>

<div id="matchesList" class="p-10 text-center text-zinc-500 font-bold uppercase text-xs">
Loading matches‚Ä¶
</div>
</div>

<!-- STANDINGS TAB (UNCHANGED) -->
<div id="tab-standings" class="hidden">
<div class="flex gap-2 px-4 py-4 overflow-x-auto">
<button id="btn-PREM" onclick="renderTable('PREM')" class="league-btn">PREMIER LEAGUE</button>
<button id="btn-LALIGA" onclick="renderTable('LALIGA')" class="league-btn">LA LIGA</button>
<button id="btn-MLS" onclick="renderTable('MLS')" class="league-btn">MLS</button>
</div>
<div class="px-2 overflow-x-auto">
<table class="w-full text-left text-[11px]">
<thead><tr id="tableHead"></tr></thead>
<tbody id="standingsContent"></tbody>
</table>
</div>
</div>

</main>

<nav class="nav-bottom">
<div onclick="switchTab('matches')" id="nav-matches" class="nav-btn active">‚öΩ Matches</div>
<div onclick="switchTab('standings')" id="nav-standings" class="nav-btn">üèÜ Standings</div>
</nav>

<script>
/* ====== ORIGINAL CONSTANTS (UNCHANGED) ====== */
const SCHEDULE_URLS = {
PREM:'https://docs.google.com/spreadsheets/d/e/2PACX-1vRGHDcX_hIIzPlyqTZhiySqRNTQho5XFkyRaHqHa0tiPDC3D7zO_b3Mud054IRLzPKaHV1cERaYj3w0/pub?gid=0&single=true&output=csv',
LALIGA:'https://docs.google.com/spreadsheets/d/e/2PACX-1vRGHDcX_hIIzPlyqTZhiySqRNTQho5XFkyRaHqHa0tiPDC3D7zO_b3Mud054IRLzPKaHV1cERaYj3w0/pub?gid=1737121812&single=true&output=csv',
MLS:'https://docs.google.com/spreadsheets/d/e/2PACX-1vT03H3Or-8DCxNZkAnIdhVuwJsej-AEuo6VgZO3pG4WsBYt1HPxCLN0CsGa5P33XghzKltG5AiymB4q/pub?gid=0&single=true&output=csv'
};

const STANDINGS_URLS = {
PREM:'https://docs.google.com/spreadsheets/d/e/2PACX-1vRGHDcX_hIIzPlyqTZhiySqRNTQho5XFkyRaHqHa0tiPDC3D7zO_b3Mud054IRLzPKaHV1cERaYj3w0/pub?gid=935978435&single=true&output=csv',
LALIGA:'https://docs.google.com/spreadsheets/d/e/2PACX-1vRGHDcX_hIIzPlyqTZhiySqRNTQho5XFkyRaHqHa0tiPDC3D7zO_b3Mud054IRLzPKaHV1cERaYj3w0/pub?gid=886605383&single=true&output=csv',
MLS:'https://docs.google.com/spreadsheets/d/e/2PACX-1vT03H3Or-8DCxNZkAnIdhVuwJsej-AEuo6VgZO3pG4WsBYt1HPxCLN0CsGa5P33XghzKltG5AiymB4q/pub?gid=1177278404&single=true&output=csv'
};

/* LOGOS OBJECT ‚Äî FULLY PRESERVED */
const LOGOS = {
            "Liverpool": "https://resources.premierleague.com/premierleague25/badges-alt/14.svg",
            "Newcastle": "https://resources.premierleague.com/premierleague25/badges-alt/4.svg",
            "Chelsea": "https://resources.premierleague.com/premierleague25/badges-alt/8.svg",
            "Aston Villa": "https://resources.premierleague.com/premierleague25/badges-alt/7.svg",
            "Man City": "https://resources.premierleague.com/premierleague25/badges-alt/43.svg",
            "Man United": "https://resources.premierleague.com/premierleague25/badges-alt/1.svg",
            "Arsenal": "https://resources.premierleague.com/premierleague25/badges-alt/3.svg",
            "Southampton": "https://upload.wikimedia.org/wikipedia/en/thumb/c/c9/FC_Southampton.svg/1051px-FC_Southampton.svg.png",
            "Bournemouth": "https://resources.premierleague.com/premierleague25/badges-alt/91.svg",
            "Leeds": "https://resources.premierleague.com/premierleague25/badges-alt/2.svg",
            "Brighton": "https://resources.premierleague.com/premierleague25/badges-alt/36.svg",
            "West Ham": "https://resources.premierleague.com/premierleague25/badges-alt/21.svg",
            "Brentford": "https://resources.premierleague.com/premierleague25/badges-alt/94.svg",
            "Tottenham": "https://resources.premierleague.com/premierleague25/badges-alt/6.svg",
            "Crystal Palace": "https://resources.premierleague.com/premierleague25/badges-alt/31.svg",
            "Leicester": "https://upload.wikimedia.org/wikipedia/en/thumb/2/2d/Leicester_City_crest.svg/1200px-Leicester_City_crest.svg.png",
            "Nott'm Forest": "https://resources.premierleague.com/premierleague25/badges-alt/17.svg",
            "Nottingham": "https://resources.premierleague.com/premierleague25/badges-alt/17.svg",
            "Sunderland": "https://resources.premierleague.com/premierleague25/badges-alt/56.svg",
            "Burnley": "https://resources.premierleague.com/premierleague25/badges-alt/90.svg",
            "Wolves": "https://resources.premierleague.com/premierleague25/badges-alt/39.svg",
            "Fulham": "https://resources.premierleague.com/premierleague25/badges-alt/54.svg",
            "Everton": "https://resources.premierleague.com/premierleague25/badges-alt/11.svg",
            "Ipswich": "https://resources.premierleague.com/premierleague25/badges-alt/40.svg",
            "Barcelona": "https://ssl.gstatic.com/onebox/media/sports/logos/paYnEE8hcrP96neHRNofhQ_48x48.png",
            "Real Madrid": "https://ssl.gstatic.com/onebox/media/sports/logos/Th4fAVAZeCJWRcKoLW7koA_48x48.png",
            "Sevilla": "https://ssl.gstatic.com/onebox/media/sports/logos/hCTs5EX3WjCMC5Jl3QE4Rw_48x48.png",
            "Real Sociedad": "https://ssl.gstatic.com/onebox/media/sports/logos/w8tb1aeBfVZIj9tZXf7eZg_48x48.png",
            "Girona": "https://ssl.gstatic.com/onebox/media/sports/logos/sHiSmLm_rA0BOC5MfrNt8A_48x48.png",
            "Atletico Madrid": "https://ssl.gstatic.com/onebox/media/sports/logos/pEqmA7CL-VRo4Llq3rwIPA_48x48.png",
            "Athletic Bilbao": "https://ssl.gstatic.com/onebox/media/sports/logos/OSL_5Zm6kYPP1J17Bo5uDA_48x48.png",
            "Athletic": "https://ssl.gstatic.com/onebox/media/sports/logos/OSL_5Zm6kYPP1J17Bo5uDA_48x48.png",
            "Elche": "https://ssl.gstatic.com/onebox/media/sports/logos/uyyqqxLIYT_lQIXRyMI_RA_48x48.png",
            "Osasuna": "https://ssl.gstatic.com/onebox/media/sports/logos/pk-hNCNpGM_JDoHHvLVF-Q_48x48.png",
            "Villarreal": "https://ssl.gstatic.com/onebox/media/sports/logos/WKH7Ak5cYD6Qm1EEqXzmVw_48x48.png",
            "Levante": "https://ssl.gstatic.com/onebox/media/sports/logos/SQB-jlVosxVV1Ce79FhbOA_48x48.png",
            "Las Palmas": "https://upload.wikimedia.org/wikipedia/sco/thumb/2/20/UD_Las_Palmas_logo.svg/1188px-UD_Las_Palmas_logo.svg.png",
            "Mallorca": "https://ssl.gstatic.com/onebox/media/sports/logos/Ss21P4CUmigjrEtcoapjVg_48x48.png",
            "Espanyol": "https://ssl.gstatic.com/onebox/media/sports/logos/TKitIqelDyN6M-kYt4Uc0g_48x48.png",
            "Valencia": "https://ssl.gstatic.com/onebox/media/sports/logos/QPbjvDwI_0Wuu4tCS2O6uw_48x48.png",
            "Real Betis": "https://ssl.gstatic.com/onebox/media/sports/logos/XDClkrMKtkm3UTP2YKN6oQ_48x48.png",
            "Betis": "https://ssl.gstatic.com/onebox/media/sports/logos/XDClkrMKtkm3UTP2YKN6oQ_48x48.png",
            "Real Oviedo": "https://ssl.gstatic.com/onebox/media/sports/logos/2hbZVQulcYqiPFXkWDkB_g_48x48.png",
            "Celta Vigo": "https://ssl.gstatic.com/onebox/media/sports/logos/wpdhixHP_sloegfP0UlwAw_48x48.png",
            "Celta": "https://ssl.gstatic.com/onebox/media/sports/logos/wpdhixHP_sloegfP0UlwAw_48x48.png",
            "Rayo Vallecano": "https://ssl.gstatic.com/onebox/media/sports/logos/i5LifmxEVIl0sbvIysiyhw_48x48.png",
            "Alaves": "https://ssl.gstatic.com/onebox/media/sports/logos/RUcTOeFcBc7q7uku1nR_iQ_48x48.png",
            "Getafe": "https://ssl.gstatic.com/onebox/media/sports/logos/jqll6zSd9TZofPk5CR_B1w_48x48.png",
            "Leganes": "https://ssl.gstatic.com/onebox/media/sports/logos/c0FJxye3t46n10AUIEK0cA_48x48.png",
            "Valladolid": "https://ssl.gstatic.com/onebox/media/sports/logos/SN1BSVY-lrUj6Y_ZJsOa5Q_48x48.png",
            "Miami": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747755405/assets/logos/mls-clubs/Club_Logo-Miami_tyqe64.png",
            "LAFC": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v174775309/assets/logos/mls-clubs/Club_Logo-LAFC_djrhru.png",
            "Atlanta": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747499879/assets/logos/mls-clubs/Club_Logo-Atlanta_jtk7ku.png",
            "Toronto": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1748265251/assets/logos/mls-clubs/Club_Logo-Toronto_vz6hao.png",
            "San Diego": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1748261519/assets/logos/mls-clubs/Club_Logo-San_Diego_nwpyul.png",
            "Orlando": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747769281/assets/logos/mls-clubs/Club_Logo-Orlando_ryyn7a.png",
            "Houston": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500939/assets/logos/mls-clubs/Club_Logo-Houston_oifm77.png",
            "Charlotte": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500045/assets/logos/mls-clubs/Club_Logo-Charlotte_p7sznf.png",
            "Salt Lake": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747776403/assets/logos/mls-clubs/Club_Logo-Salt_Lake_City_hpvde5.png",
            "Vancouver": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1748265547/assets/logos/mls-clubs/Club_Logo-Vancouver_ao9phl.png",
            "LA Galaxy": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747755165/assets/logos/mls-clubs/Club_Logo-LA_Galaxy_fg0wjp.png",
            "Seattle": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1748265125/assets/logos/mls-clubs/Club_Logo-Seattle_e6jk2x.png",
            "Columbus": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500414/assets/logos/mls-clubs/Club_Logo-Columbus_light_z3eq8l.png",
            "Montreal": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747755806/assets/logos/mls-clubs/Club_Logo-Montreal_beeqnh.png",
            "San Jose": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1748262048/assets/logos/mls-clubs/Club_Logo-San_Jose_opzlmo.png",
            "NY Red Bulls": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747771783/assets/logos/mls-clubs/Club_Logo-RBNY_dwawvt.png",
            "Colorado": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500322/assets/logos/mls-clubs/Club_Logo-Colorado_n5kpss.png",
            "New England": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1766020750/assets/NE_Logo_PRI_FC_RGB_480x480_fdx2us.png",
            "Minnesota": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747754826/assets/logos/mls-clubs/Club_Logo-Minnesota_ftweor.png",
            "Chicago": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500178/assets/logos/mls-clubs/Club_Logo-Chicago_jm2yev.png",
            "Portland": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747771943/assets/logos/mls-clubs/Club_Logo-Portland_jrihbf.png",
            "Nashville": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747754937/assets/logos/mls-clubs/Club_Logo-Nashville_owcihx.png",
            "Austin": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500115/assets/logos/mls-clubs/Club_Logo-Austin_u0tpqe.png",
            "FC Dallas": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500587/assets/logos/mls-clubs/Club_Logo-Dallas_oxywdo.png",
            "Dallas": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500587/assets/logos/mls-clubs/Club_Logo-Dallas_oxywdo.png",
            "St Louis": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1748265198/assets/logos/mls-clubs/Club_Logo-St._Louis_oikgm5.png",
            "NYCFC": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747755975/assets/logos/mls-clubs/Club_Logo-NYC_vhnmkv.png",
            "Philadelphia": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747772038/assets/logos/mls-clubs/Club_Logo-Philadelphia_l8yj9f.png",
            "Sporting KC": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1748265350/assets/logos/mls-clubs/Club_Logo-Sporting_Kansas_City_rrkzdb.png",
            "DC United": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500514/assets/logos/mls-clubs/Club_Logo-DC_United_igj4qy.png",
            "Cincinnati": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500252/assets/logos/mls-clubs/Club_Logo-Cincinatti_ohmgcp.png"
        };

/* ====== STATE ====== */
let allMatches = [];
let allDates = [];
let currentDateIndex = 0;
let currentDate = null;
let currentFilter = 'all';

/* ====== DATE HELPERS ====== */
function normalizeDate(d){ return new Date(d.getFullYear(),d.getMonth(),d.getDate()); }
function isSameDay(a,b){ return normalizeDate(a).getTime()===normalizeDate(b).getTime(); }
function formatDate(d){ return d.toLocaleDateString(undefined,{weekday:'long',month:'long',day:'numeric'}); }
function findClosestDateIndex(target){
const t=normalizeDate(target).getTime();
let i=allDates.findIndex(d=>d.getTime()>=t);
if(i===-1)i=allDates.length-1;
return Math.max(0,i);
}

/* ====== LOAD MATCHES (UPDATED LOGIC ONLY) ====== */
async function loadAllMatches(){
for(const league in SCHEDULE_URLS){
await new Promise(r=>{
Papa.parse(SCHEDULE_URLS[league],{
download:true,header:true,skipEmptyLines:true,
complete:res=>{
res.data.forEach(row=>{
const d=new Date(row.Date||row.date);
if(!isNaN(d)&&row.Home&&row.Away){
allMatches.push({
league,
date:d,
home:row.Home,
away:row.Away,
homeScore:row['Home Score']||'',
awayScore:row['Away Score']||'',
time:row.Time||'TBD'
});
}});
r();
}});
}
allMatches.sort((a,b)=>a.date-b.date);

const map=new Map();
allMatches.forEach(m=>{
const d=normalizeDate(m.date);
map.set(d.getTime(),d);
});
allDates=[...map.values()].sort((a,b)=>a-b);

currentDateIndex=findClosestDateIndex(new Date());
currentDate=allDates[currentDateIndex];

renderMatches();
}

/* ====== RENDER MATCHES ====== */
function renderMatches(){
document.getElementById('currentDate').textContent=formatDate(currentDate);
const day=allMatches.filter(m=>isSameDay(m.date,currentDate));
const list=currentFilter==='all'?day:day.filter(m=>m.league===currentFilter);

document.getElementById('matchesList').innerHTML=list.map(m=>{
const hasScore=m.homeScore!==''&&m.awayScore!=='';
return `
<div class="match-card">
<div class="flex-1">
<div class="team-row">
<img src="${getLogo(m.home)}" class="team-logo">
<span class="team-name">${m.home}</span>
${hasScore?`<span class="score">${m.homeScore}</span>`:''}
</div>
<div class="team-row">
<img src="${getLogo(m.away)}" class="team-logo">
<span class="team-name">${m.away}</span>
${hasScore?`<span class="score">${m.awayScore}</span>`:''}
</div>
</div>
${!hasScore?`<div class="match-time">${m.time}</div>`:''}
</div>`;
}).join('');
}

/* ====== NAV ====== */
function changeDate(dir){
currentDateIndex=Math.min(allDates.length-1,Math.max(0,currentDateIndex+dir));
currentDate=allDates[currentDateIndex];
renderMatches();
}
function resetToToday(){
currentDateIndex=findClosestDateIndex(new Date());
currentDate=allDates[currentDateIndex];
renderMatches();
}
function filterLeague(l){
currentFilter=l;
document.querySelectorAll('.filter-pill').forEach(p=>p.classList.remove('active'));
event.target.classList.add('active');
renderMatches();
}

/* ====== TABS ====== */
function switchTab(t){
['matches','standings'].forEach(x=>{
document.getElementById(`tab-${x}`).classList.toggle('hidden',x!==t);
document.getElementById(`nav-${x}`).classList.toggle('active',x===t);
});
if(t==='standings')renderTable('PREM');
}

/* ====== INIT ====== */
loadAllMatches();
</script>

</body>
</html>
