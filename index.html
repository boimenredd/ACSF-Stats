<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ScoreHub Pro</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">
    <style>
        :root { --accent: #00ff85; --bg: #0b0e11; --card: #161b22; --border: #30363d; }
        body { background: var(--bg); color: #fff; font-family: 'Inter', sans-serif; overflow-x: hidden; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        /* Sticky Header */
        header { background: rgba(11, 14, 17, 0.9); backdrop-blur: 12px; border-bottom: 1px solid var(--border); }
        
        /* Match List Scrolling */
        #matchList { scroll-behavior: smooth; }
        .date-divider { position: sticky; top: 120px; background: var(--bg); z-index: 10; padding: 10px 0; font-size: 11px; font-weight: 900; color: #8b949e; letter-spacing: 0.1em; }
        
        /* Score Styling */
        .score-box { background: #000; padding: 6px 12px; border-radius: 8px; font-weight: 900; display: flex; gap: 8px; border: 1px solid #21262d; }
        .live-dot { height: 6px; width: 6px; background: #ff453a; border-radius: 50%; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }

        /* Navigation */
        .nav-bottom { position: fixed; bottom: 0; width: 100%; max-width: 448px; background: #161b22; border-top: 1px solid var(--border); display: flex; justify-content: space-around; padding: 12px; z-index: 100; }
        .nav-link { font-size: 10px; font-weight: 800; color: #8b949e; cursor: pointer; text-align: center; }
        .nav-link.active { color: var(--accent); }
    </style>
</head>
<body class="max-w-md mx-auto pb-20">

    <header class="fixed top-0 w-full max-w-md z-50">
        <div class="p-4 flex justify-between items-center">
            <h1 class="text-xl font-black italic tracking-tighter">SCORE<span class="text-[#00ff85]">HUB</span></h1>
            <span id="localTime" class="text-[10px] font-mono text-zinc-500"></span>
        </div>
        
        <div class="flex gap-2 overflow-x-auto px-4 pb-3 no-scrollbar">
            <button onclick="changeLeague('PREM')" id="btn-PREM" class="px-4 py-2 rounded-full text-[10px] font-black bg-white text-black">PREMIER LEAGUE</button>
            <button onclick="changeLeague('LALIGA')" id="btn-LALIGA" class="px-4 py-2 rounded-full text-[10px] font-black bg-zinc-800 text-zinc-400">LA LIGA</button>
            <button onclick="changeLeague('MLS')" id="btn-MLS" class="px-4 py-2 rounded-full text-[10px] font-black bg-zinc-800 text-zinc-400">MLS</button>
        </div>
    </header>

    <main class="mt-32 px-4">
        <section id="match-view">
            <div id="matchList">
                </div>
        </section>

        <section id="table-view" class="hidden">
            <div class="bg-zinc-900/50 rounded-xl overflow-hidden border border-zinc-800">
                <table class="w-full text-left text-xs">
                    <thead class="bg-zinc-800 text-[9px] font-black text-zinc-500 uppercase">
                        <tr>
                            <th class="p-3">#</th>
                            <th class="p-3">Team</th>
                            <th class="p-3 text-center">GD</th>
                            <th class="p-3 text-right">PTS</th>
                        </tr>
                    </thead>
                    <tbody id="standingsContent"></tbody>
                </table>
            </div>
        </section>
    </main>

    <nav class="nav-bottom">
        <div onclick="showTab('match')" id="nav-match" class="nav-link active">MATCHES</div>
        <div onclick="showTab('table')" id="nav-table" class="nav-link">STANDINGS</div>
        <div onclick="showTab('stats')" id="nav-stats" class="nav-link">PLAYER STATS</div>
    </nav>

    <script>
        const CONFIG = {
            PREM: { sch: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRGHDcX_hIIzPlyqTZhiySqRNTQho5XFkyRaHqHa0tiPDC3D7zO_b3Mud054IRLzPKaHV1cERaYj3w0/pub?gid=1616061697&single=true&output=csv', tbl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRGHDcX_hIIzPlyqTZhiySqRNTQho5XFkyRaHqHa0tiPDC3D7zO_b3Mud054IRLzPKaHV1cERaYj3w0/pub?gid=935978435&single=true&output=csv' },
            LALIGA: { sch: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRGHDcX_hIIzPlyqTZhiySqRNTQho5XFkyRaHqHa0tiPDC3D7zO_b3Mud054IRLzPKaHV1cERaYj3w0/pub?gid=1516477023&single=true&output=csv', tbl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRGHDcX_hIIzPlyqTZhiySqRNTQho5XFkyRaHqHa0tiPDC3D7zO_b3Mud054IRLzPKaHV1cERaYj3w0/pub?gid=886605383&single=true&output=csv' },
            MLS: { sch: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTAT0GInc6QMrh4OdSjMk63NmcvN_1lyKpDnwYifaQBqtBMu3JAWrJRr0DqzEFt1iPbkV7vZPMOcuis/pub?gid=0&single=true&output=csv', tbl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vT03H3Or-8DCxNZkAnIdhVuwJsej-AEuo6VgZO3pG4WsBYt1HPxCLN0CsGa5P33XghzKltG5AiymB4q/pub?gid=1177278404&single=true&output=csv' }
        };

        let activeLeague = 'PREM';

        function updateClock() {
            const now = new Date();
            document.getElementById('localTime').innerText = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', timeZoneName: 'short'});
        }

        async function loadData() {
            const schUrl = CONFIG[activeLeague].sch;
            const tblUrl = CONFIG[activeLeague].tbl;

            Papa.parse(schUrl, {
                download: true, header: true,
                complete: (results) => renderMatches(results.data)
            });

            Papa.parse(tblUrl, {
                download: true, header: true,
                complete: (results) => renderTable(results.data)
            });
        }

        function renderMatches(data) {
            const container = document.getElementById('matchList');
            container.innerHTML = '';
            
            // Grouping by Date
            const grouped = data.reduce((acc, match) => {
                if(!match.Date) return acc;
                if(!acc[match.Date]) acc[match.Date] = [];
                acc[match.Date].push(match);
                return acc;
            }, {});

            const todayStr = new Date().toLocaleDateString('en-US', { timeZone: 'America/New_York' });

            Object.keys(grouped).forEach(date => {
                const dateHeader = document.createElement('div');
                dateHeader.className = 'date-divider';
                dateHeader.id = `date-${date.replace(/\//g, '-')}`;
                dateHeader.innerText = date === todayStr ? "TODAY" : date;
                container.appendChild(dateHeader);

                grouped[date].forEach(m => {
                    const card = `
                        <div class="bg-[#161b22] border border-zinc-800 p-4 rounded-xl mb-3 flex justify-between items-center">
                            <div class="flex flex-col gap-2 w-1/2">
                                <div class="flex items-center gap-2"><div class="w-4 h-4 bg-zinc-700 rounded-sm"></div><span class="text-xs font-bold">${m.Home_Team}</span></div>
                                <div class="flex items-center gap-2"><div class="w-4 h-4 bg-zinc-700 rounded-sm"></div><span class="text-xs font-bold">${m.Away_Team}</span></div>
                            </div>
                            <div class="flex flex-col items-end">
                                <div class="score-box">
                                    <span class="${m.Status === 'Live' ? 'text-green-400' : 'text-white'}">${m.Home_Score || 0}</span>
                                    <span class="${m.Status === 'Live' ? 'text-green-400' : 'text-white'}">${m.Away_Score || 0}</span>
                                </div>
                                <div class="flex items-center gap-1 mt-1">
                                    ${m.Status === 'Live' ? '<div class="live-dot"></div>' : ''}
                                    <span class="text-[8px] font-black uppercase text-zinc-500">${m.Status || 'Scheduled'}</span>
                                </div>
                            </div>
                        </div>
                    `;
                    container.insertAdjacentHTML('beforeend', card);
                });
            });

            // Auto-scroll to Today
            const todayEl = document.getElementById(`date-${todayStr.replace(/\//g, '-')}`);
            if(todayEl) window.scrollTo({ top: todayEl.offsetTop - 140, behavior: 'smooth' });
        }

        function renderTable(data) {
            const body = document.getElementById('standingsContent');
            body.innerHTML = data.map((row, i) => `
                <tr class="border-b border-zinc-800/50">
                    <td class="p-3 font-bold text-zinc-500">${i+1}</td>
                    <td class="p-3 font-bold text-white">${row.Team}</td>
                    <td class="p-3 text-center text-zinc-400 font-mono">${row.GD}</td>
                    <td class="p-3 text-right font-black text-[#00ff85]">${row.PTS}</td>
                </tr>
            `).join('');
        }

        function changeLeague(league) {
            activeLeague = league;
            ['PREM', 'LALIGA', 'MLS'].forEach(l => {
                const btn = document.getElementById(`btn-${l}`);
                btn.className = l === league ? 
                    'px-4 py-2 rounded-full text-[10px] font-black bg-white text-black' : 
                    'px-4 py-2 rounded-full text-[10px] font-black bg-zinc-800 text-zinc-400';
            });
            loadData();
        }

        function showTab(tab) {
            document.getElementById('match-view').classList.toggle('hidden', tab !== 'match');
            document.getElementById('table-view').classList.toggle('hidden', tab !== 'table');
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            document.getElementById(`nav-${tab}`).classList.add('active');
        }

        setInterval(updateClock, 1000);
        setInterval(loadData, 60000); // Live refresh every minute
        updateClock();
        loadData();
    </script>
</body>
</html>
