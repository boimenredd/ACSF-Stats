<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ScoreHub Pro</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&family=Roboto+Mono:wght@700&display=swap" rel="stylesheet">
    <style>
        :root { --accent: #00ff85; --bg: #0b0e11; --card: #1c1c1c; --border: #30363d; --header-bg: #121212; }
        body { background: var(--bg); color: #fff; font-family: 'Inter', sans-serif; letter-spacing: -0.02em; overflow-x: hidden; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        /* Layout Styles */
        .league-container { background: var(--card); border-radius: 20px; margin: 12px 16px; overflow: hidden; border: 1px solid #2a2a2a; }
        .league-header { background: var(--header-bg); padding: 12px 16px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #2a2a2a; }
        .match-row { padding: 18px 16px; display: flex; align-items: center; justify-content: center; border-bottom: 1px solid #ffffff0a; }
        .match-row:last-child { border-bottom: none; }
        .team-side { display: flex; align-items: center; gap: 10px; width: 42%; }
        .team-home { justify-content: flex-end; text-align: right; }
        .team-away { justify-content: flex-start; text-align: left; }
        .time-box { width: 16%; text-align: center; font-family: 'Roboto Mono', monospace; }
        
        /* Date Navigation Hub */
        .date-nav { position: sticky; top: 60px; background: var(--bg); z-index: 50; padding: 15px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
        .nav-arrow { background: #1c1c1c; width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; border: 1px solid var(--border); transition: 0.2s; }
        .nav-arrow:hover { border-color: var(--accent); color: var(--accent); }

        /* Standing Indicators */
        .qualify-bar { width: 4px; height: 35px; border-radius: 2px; margin-right: 12px; }
        
        /* Navigation */
        .nav-bottom { position: fixed; bottom: 0; width: 100%; max-width: 448px; background: #161b22; border-top: 1px solid var(--border); display: flex; justify-content: space-around; padding: 14px 0; z-index: 100; }
        .nav-btn { font-size: 10px; font-weight: 800; color: #8b949e; cursor: pointer; text-transform: uppercase; }
        .nav-btn.active { color: var(--accent); }
        .active-league { background: var(--accent) !important; color: #000 !important; }
    </style>
</head>
<body class="max-w-md mx-auto pb-32">

    <header class="fixed top-0 w-full max-w-md bg-[#0b0e11]/95 backdrop-blur-md z-[100] border-b border-[#1f2428]">
        <div class="p-4 flex justify-between items-center">
            <h1 class="text-xl font-black italic uppercase">Score<span class="text-[#00ff85]">Hub</span></h1>
            <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
        </div>
    </header>

    <main class="mt-16">
        <div id="tab-matches">
            <div class="date-nav">
                <button class="nav-arrow" onclick="changeDate(-1)">←</button>
                <div class="text-center">
                    <div id="current-date-display" class="text-xs font-black uppercase tracking-widest text-zinc-100">Loading...</div>
                </div>
                <button class="nav-arrow" onclick="changeDate(1)">→</button>
            </div>
            <div id="unifiedMatchList"></div>
        </div>

        <div id="tab-standings" class="hidden">
            <div class="flex gap-2 px-4 py-4 overflow-x-auto no-scrollbar">
                <button id="btn-PREM" onclick="renderTable('PREM')" class="league-btn text-[10px] font-black bg-zinc-800 px-5 py-2.5 rounded-full whitespace-nowrap">PREMIER LEAGUE</button>
                <button id="btn-LALIGA" onclick="renderTable('LALIGA')" class="league-btn text-[10px] font-black bg-zinc-800 px-5 py-2.5 rounded-full whitespace-nowrap">LA LIGA</button>
                <button id="btn-MLS" onclick="renderTable('MLS')" class="league-btn text-[10px] font-black bg-zinc-800 px-5 py-2.5 rounded-full whitespace-nowrap">MLS</button>
            </div>
            <div class="px-2 overflow-x-auto">
                <table class="w-full text-left text-[11px] min-w-[450px]">
                    <thead class="bg-zinc-800/50 uppercase">
                        <tr>
                            <th class="pl-4 py-3">Team</th>
                            <th class="text-center">MP</th>
                            <th class="text-center">W-D-L</th>
                            <th class="text-center">GD</th>
                            <th class="pr-4 text-right">PTS</th>
                        </tr>
                    </thead>
                    <tbody id="standingsContent"></tbody>
                </table>
            </div>
        </div>

        <div id="tab-stats" class="hidden p-20 flex flex-col items-center justify-center">
            <div class="text-zinc-600 font-black uppercase tracking-[0.3em] text-sm italic">Coming Soon</div>
            <div class="w-12 h-1 bg-zinc-800 mt-4"></div>
        </div>
    </main>

    <nav class="nav-bottom">
        <div onclick="switchTab('matches')" id="nav-matches" class="nav-btn active">HUB</div>
        <div onclick="switchTab('standings')" id="nav-standings" class="nav-btn">TABLE</div>
        <div onclick="switchTab('stats')" id="nav-stats" class="nav-btn">STATS</div>
    </nav>

    <script>
        const SCHEDULE_URLS = {
            PREM: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRGHDcX_hIIzPlyqTZhiySqRNTQho5XFkyRaHqHa0tiPDC3D7zO_b3Mud054IRLzPKaHV1cERaYj3w0/pub?gid=1616061697&single=true&output=csv',
            LALIGA: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRGHDcX_hIIzPlyqTZhiySqRNTQho5XFkyRaHqHa0tiPDC3D7zO_b3Mud054IRLzPKaHV1cERaYj3w0/pub?gid=1516477023&single=true&output=csv',
            MLS: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTAT0GInc6QMrh4OdSjMk63NmcvN_1lyKpDnwYifaQBqtBMu3JAWrJRr0DqzEFt1iPbkV7vZPMOcuis/pub?gid=0&single=true&output=csv'
        };

        const STANDINGS_URLS = {
            PREM: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRGHDcX_hIIzPlyqTZhiySqRNTQho5XFkyRaHqHa0tiPDC3D7zO_b3Mud054IRLzPKaHV1cERaYj3w0/pub?gid=935978435&single=true&output=csv',
            LALIGA: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRGHDcX_hIIzPlyqTZhiySqRNTQho5XFkyRaHqHa0tiPDC3D7zO_b3Mud054IRLzPKaHV1cERaYj3w0/pub?gid=886605383&single=true&output=csv',
            MLS: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vT03H3Or-8DCxNZkAnIdhVuwJsej-AEuo6VgZO3pG4WsBYt1HPxCLN0CsGa5P33XghzKltG5AiymB4q/pub?gid=1177278404&single=true&output=csv'
        };

        const LOGOS = {
            "Liverpool": "https://resources.premierleague.com/premierleague25/badges-alt/14.svg",
            "Newcastle": "https://resources.premierleague.com/premierleague25/badges-alt/4.svg",
            "Chelsea": "https://resources.premierleague.com/premierleague25/badges-alt/8.svg",
            "Aston Villa": "https://resources.premierleague.com/premierleague25/badges-alt/7.svg",
            "Man City": "https://resources.premierleague.com/premierleague25/badges-alt/43.svg",
            "Man United": "https://resources.premierleague.com/premierleague25/badges-alt/1.svg",
            "Arsenal": "https://resources.premierleague.com/premierleague25/badges-alt/3.svg",
            "Southampton": "https://upload.wikimedia.org/wikipedia/en/thumb/c/c9/FC_Southampton.svg/1051px-FC_Southampton.svg.png",
            "Bournemouth": "https://resources.premierleague.com/premierleague25/badges-alt/91.svg",
            "Leeds": "https://resources.premierleague.com/premierleague25/badges-alt/2.svg",
            "Brighton": "https://resources.premierleague.com/premierleague25/badges-alt/36.svg",
            "West Ham": "https://resources.premierleague.com/premierleague25/badges-alt/21.svg",
            "Brentford": "https://resources.premierleague.com/premierleague25/badges-alt/94.svg",
            "Tottenham": "https://resources.premierleague.com/premierleague25/badges-alt/6.svg",
            "Crystal Palace": "https://resources.premierleague.com/premierleague25/badges-alt/31.svg",
            "Leicester": "https://upload.wikimedia.org/wikipedia/en/thumb/2/2d/Leicester_City_crest.svg/1200px-Leicester_City_crest.svg.png",
            "Nott'm Forest": "https://resources.premierleague.com/premierleague25/badges-alt/17.svg",
            "Sunderland": "https://resources.premierleague.com/premierleague25/badges-alt/56.svg",
            "Burnley": "https://resources.premierleague.com/premierleague25/badges-alt/90.svg",
            "Wolves": "https://resources.premierleague.com/premierleague25/badges-alt/39.svg",
            "Fulham": "https://resources.premierleague.com/premierleague25/badges-alt/54.svg",
            "Everton": "https://resources.premierleague.com/premierleague25/badges-alt/11.svg",
            "Ipswich": "https://resources.premierleague.com/premierleague25/badges-alt/40.svg",
            "Barcelona": "https://ssl.gstatic.com/onebox/media/sports/logos/paYnEE8hcrP96neHRNofhQ_48x48.png",
            "Real Madrid": "https://ssl.gstatic.com/onebox/media/sports/logos/Th4fAVAZeCJWRcKoLW7koA_48x48.png",
            "Sevilla": "https://ssl.gstatic.com/onebox/media/sports/logos/hCTs5EX3WjCMC5Jl3QE4Rw_48x48.png",
            "Real Sociedad": "https://ssl.gstatic.com/onebox/media/sports/logos/w8tb1aeBfVZIj9tZXf7eZg_48x48.png",
            "Girona": "https://ssl.gstatic.com/onebox/media/sports/logos/sHiSmLm_rA0BOC5MfrNt8A_48x48.png",
            "Atletico Madrid": "https://ssl.gstatic.com/onebox/media/sports/logos/pEqmA7CL-VRo4Llq3rwIPA_48x48.png",
            "Athletic Bilbao": "https://ssl.gstatic.com/onebox/media/sports/logos/OSL_5Zm6kYPP1J17Bo5uDA_48x48.png",
            "Elche": "https://ssl.gstatic.com/onebox/media/sports/logos/uyyqqxLIYT_lQIXRyMI_RA_48x48.png",
            "Osasuna": "https://ssl.gstatic.com/onebox/media/sports/logos/pk-hNCNpGM_JDoHHvLVF-Q_48x48.png",
            "Villarreal": "https://ssl.gstatic.com/onebox/media/sports/logos/WKH7Ak5cYD6Qm1EEqXzmVw_48x48.png",
            "Levante": "https://ssl.gstatic.com/onebox/media/sports/logos/SQB-jlVosxVV1Ce79FhbOA_48x48.png",
            "Las Palmas": "https://upload.wikimedia.org/wikipedia/sco/thumb/2/20/UD_Las_Palmas_logo.svg/1188px-UD_Las_Palmas_logo.svg.png",
            "Mallorca": "https://ssl.gstatic.com/onebox/media/sports/logos/Ss21P4CUmigjrEtcoapjVg_48x48.png",
            "Espanyol": "https://ssl.gstatic.com/onebox/media/sports/logos/TKitIqelDyN6M-kYt4Uc0g_48x48.png",
            "Valencia": "https://ssl.gstatic.com/onebox/media/sports/logos/QPbjvDwI_0Wuu4tCS2O6uw_48x48.png",
            "Real Betis": "https://ssl.gstatic.com/onebox/media/sports/logos/XDClkrMKtkm3UTP2YKN6oQ_48x48.png",
            "Oviedo": "https://ssl.gstatic.com/onebox/media/sports/logos/2hbZVQulcYqiPFXkWDkB_g_48x48.png",
            "Celta Vigo": "https://ssl.gstatic.com/onebox/media/sports/logos/wpdhixHP_sloegfP0UlwAw_48x48.png",
            "Rayo Vallecano": "https://ssl.gstatic.com/onebox/media/sports/logos/i5LifmxEVIl0sbvIysiyhw_48x48.png",
            "Alaves": "https://ssl.gstatic.com/onebox/media/sports/logos/RUcTOeFcBc7q7uku1nR_iQ_48x48.png",
            "Getafe": "https://ssl.gstatic.com/onebox/media/sports/logos/jqll6zSd9TZofPk5CR_B1w_48x48.png",
            "Miami": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747755405/assets/logos/mls-clubs/Club_Logo-Miami_tyqe64.png",
            "LAFC": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v174775309/assets/logos/mls-clubs/Club_Logo-LAFC_djrhru.png",
            "Atlanta": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747499879/assets/logos/mls-clubs/Club_Logo-Atlanta_jtk7ku.png",
            "Toronto": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1748265251/assets/logos/mls-clubs/Club_Logo-Toronto_vz6hao.png",
            "San Diego": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1748261519/assets/logos/mls-clubs/Club_Logo-San_Diego_nwpyul.png",
            "Orlando": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747769281/assets/logos/mls-clubs/Club_Logo-Orlando_ryyn7a.png",
            "Houston": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500939/assets/logos/mls-clubs/Club_Logo-Houston_oifm77.png",
            "Charlotte": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500045/assets/logos/mls-clubs/Club_Logo-Charlotte_p7sznf.png",
            "Salt Lake": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747776403/assets/logos/mls-clubs/Club_Logo-Salt_Lake_City_hpvde5.png",
            "Vancouver": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1748265547/assets/logos/mls-clubs/Club_Logo-Vancouver_ao9phl.png",
            "LA Galaxy": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747755165/assets/logos/mls-clubs/Club_Logo-LA_Galaxy_fg0wjp.png",
            "Seattle": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1748265125/assets/logos/mls-clubs/Club_Logo-Seattle_e6jk2x.png",
            "Columbus": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500414/assets/logos/mls-clubs/Club_Logo-Columbus_light_z3eq8l.png",
            "Montreal": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747755806/assets/logos/mls-clubs/Club_Logo-Montreal_beeqnh.png",
            "San Jose": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1748262048/assets/logos/mls-clubs/Club_Logo-San_Jose_opzlmo.png",
            "NY Red Bulls": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747771783/assets/logos/mls-clubs/Club_Logo-RBNY_dwawvt.png",
            "Colorado": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500322/assets/logos/mls-clubs/Club_Logo-Colorado_n5kpss.png",
            "New England": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1766020750/assets/NE_Logo_PRI_FC_RGB_480x480_fdx2us.png",
            "Minnesota": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747754826/assets/logos/mls-clubs/Club_Logo-Minnesota_ftweor.png",
            "Chicago": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500178/assets/logos/mls-clubs/Club_Logo-Chicago_jm2yev.png",
            "Portland": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747771943/assets/logos/mls-clubs/Club_Logo-Portland_jrihbf.png",
            "Nashville": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747754937/assets/logos/mls-clubs/Club_Logo-Nashville_owcihx.png",
            "Austin": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500115/assets/logos/mls-clubs/Club_Logo-Austin_u0tpqe.png",
            "FC Dallas": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500587/assets/logos/mls-clubs/Club_Logo-Dallas_oxywdo.png",
            "St Louis": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1748265198/assets/logos/mls-clubs/Club_Logo-St._Louis_oikgm5.png",
            "NYCFC": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747755975/assets/logos/mls-clubs/Club_Logo-NYC_vhnmkv.png",
            "Philadelphia": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747772038/assets/logos/mls-clubs/Club_Logo-Philadelphia_l8yj9f.png",
            "Sporting KC": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1748265350/assets/logos/mls-clubs/Club_Logo-Sporting_Kansas_City_rrkzdb.png",
            "DC United": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500514/assets/logos/mls-clubs/Club_Logo-DC_United_igj4qy.png",
            "Cincinnati": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500252/assets/logos/mls-clubs/Club_Logo-Cincinatti_ohmgcp.png"
        };

        let masterScheduleData = {};
        let scheduleDates = [];
        let currentDateIndex = 0;

        function getLogo(name) {
            if(!name) return "";
            for(let key in LOGOS) if(name.toLowerCase().includes(key.toLowerCase())) return LOGOS[key];
            return `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=222&color=fff&bold=true`;
        }

        async function fetchSchedules() {
            const list = document.getElementById('unifiedMatchList');
            list.innerHTML = `<div class="p-20 text-center animate-pulse text-zinc-500 font-bold uppercase">Syncing Live Schedule...</div>`;
            masterScheduleData = {};

            for (const [league, url] of Object.entries(SCHEDULE_URLS)) {
                await new Promise(resolve => {
                    Papa.parse(url, { download: true, complete: (res) => {
                        let currentHeader = "";
                        res.data.slice(1).forEach(row => {
                            if (row[0] && row[0].trim() !== "" && !row[0].includes("Matchday") && isNaN(row[0])) {
                                currentHeader = row[0].trim();
                            }
                            const home = row[1] ? row[1].trim() : "";
                            const away = row[2] ? row[2].trim() : "";
                            const score = row[3] || "TBD";
                            if (home && away && currentHeader) {
                                if (!masterScheduleData[currentHeader]) masterScheduleData[currentHeader] = {};
                                if (!masterScheduleData[currentHeader][league]) masterScheduleData[currentHeader][league] = [];
                                masterScheduleData[currentHeader][league].push({ home, away, score });
                            }
                        });
                        resolve();
                    }});
                });
            }
            scheduleDates = Object.keys(masterScheduleData).sort((a, b) => new Date(a) - new Date(b));
            currentDateIndex = 0;
            renderCurrentDate();
        }

        function changeDate(dir) {
            currentDateIndex += dir;
            if (currentDateIndex < 0) currentDateIndex = 0;
            if (currentDateIndex >= scheduleDates.length) currentDateIndex = scheduleDates.length - 1;
            renderCurrentDate();
        }

        function renderCurrentDate() {
            const list = document.getElementById('unifiedMatchList');
            const dateDisplay = document.getElementById('current-date-display');
            list.innerHTML = '';
            
            if (scheduleDates.length === 0) {
                dateDisplay.innerText = "NO MATCHES";
                return;
            }

            const date = scheduleDates[currentDateIndex];
            dateDisplay.innerText = date;

            for (const league in masterScheduleData[date]) {
                let html = `<div class="league-container">
                    <div class="league-header"><span class="text-[11px] font-black uppercase flex items-center gap-2"><span class="w-1 h-3 bg-[#00ff85] rounded-full"></span> ${league}</span></div>`;
                masterScheduleData[date][league].forEach(m => {
                    html += `<div class="match-row">
                        <div class="team-side team-home">
                            <span class="text-[11px] font-bold truncate">${m.home}</span>
                            <img src="${getLogo(m.home)}" class="w-6 h-6 object-contain">
                        </div>
                        <div class="time-box"><span class="text-[10px] font-black text-[#00ff85]">${m.score}</span></div>
                        <div class="team-side team-away">
                            <img src="${getLogo(m.away)}" class="w-6 h-6 object-contain">
                            <span class="text-[11px] font-bold truncate">${m.away}</span>
                        </div>
                    </div>`;
                });
                list.insertAdjacentHTML('beforeend', html + `</div>`);
            }
        }

        function getStyle(league, pos) {
            pos = parseInt(pos);
            if (league === 'MLS') {
                if (pos === 1) return "#fbbf24";
                if (pos <= 9) return "#22c55e";
            } else {
                if (pos === 1) return "#00ff85";
                if (pos <= 4) return "#3b82f6";
                if (pos <= 6) return "#fbbf24";
                if (pos >= 18) return "#ef4444";
            }
            return "transparent";
        }

        function renderTable(league) {
            const body = document.getElementById('standingsContent');
            document.querySelectorAll('.league-btn').forEach(b => b.classList.remove('active-league'));
            document.getElementById(`btn-${league}`).classList.add('active-league');
            
            Papa.parse(STANDINGS_URLS[league], { download: true, header: true, complete: (res) => {
                body.innerHTML = res.data.map(r => {
                    if(!r.Team) return "";
                    const pos = r.Position || r['#'] || '';
                    return `<tr class="border-b border-zinc-800/50">
                        <td class="pl-4 py-3 flex items-center">
                            <div class="qualify-bar" style="background:${getStyle(league, pos)}"></div>
                            <div class="flex flex-col">
                                <span class="text-zinc-500 font-black text-xs">${pos}</span>
                                <div class="flex items-center gap-2 mt-1">
                                    <img src="${getLogo(r.Team)}" class="w-4 h-4 object-contain">
                                    <span class="font-bold text-zinc-100 uppercase tracking-tight">${r.Team}</span>
                                </div>
                            </div>
                        </td>
                        <td class="text-center font-mono text-zinc-300">${r.MP || 0}</td>
                        <td class="text-center font-mono text-[10px] text-zinc-400">${r['W-D-L'] || '0-0-0'}</td>
                        <td class="text-center font-mono text-zinc-400">${r.GD || 0}</td>
                        <td class="pr-4 text-right text-[#00ff85] font-black text-sm">${r.Points || r.Pts || 0}</td>
                    </tr>`;
                }).join('');
            }});
        }

        function switchTab(tab) {
            ['matches', 'standings', 'stats'].forEach(t => {
                document.getElementById(`tab-${t}`).classList.toggle('hidden', t !== tab);
                document.getElementById(`nav-${t}`).classList.toggle('active', t === tab);
            });
            if (tab === 'standings') renderTable('PREM');
        }

        fetchSchedules();
    </script>
</body>
</html>
